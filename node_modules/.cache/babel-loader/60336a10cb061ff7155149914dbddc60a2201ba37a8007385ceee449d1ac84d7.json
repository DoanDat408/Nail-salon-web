{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\RTD0224\\\\source\\\\repos\\\\nail-salon-web\\\\src\\\\components\\\\Services.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport api from './axiosInstance';\nimport axios from 'axios';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { FaMapMarkerAlt, FaCalendarAlt, FaChevronRight, FaUser } from 'react-icons/fa';\nimport { GiNails } from 'react-icons/gi';\nimport './css/Services.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Services = () => {\n  _s();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const {\n    selectedServices = [],\n    totalPayment = 0\n  } = location.state || {};\n  const [showTechnician, setShowTechnician] = useState(false);\n  const [selectedTechnician, setSelectedTechnician] = useState(null);\n  const [selectedDate, setSelectedDate] = useState(null);\n  const [dates, setDates] = useState([]);\n  const [showDates, setShowDates] = useState(false);\n  const [error, setError] = useState({\n    service: false,\n    technician: false,\n    date: false,\n    time: false\n  });\n  const [timeSlots, setTimeSlots] = useState([]);\n  const [selectedTime, setSelectedTime] = useState(null);\n  const technicians = [{\n    id: 1,\n    name: \"Wendy\",\n    image: '/images/people.png',\n    availability: [0, 1, 2, 3, 4, 5, 6]\n  }, {\n    id: 2,\n    name: \"Trung\",\n    image: '/images/people.png',\n    availability: [0, 1, 2, 3, 4, 5]\n  }, {\n    id: 3,\n    name: \"Kelly\",\n    image: '/images/people.png',\n    availability: [0, 1, 2, 3, 4, 5]\n  }, {\n    id: 4,\n    name: \"Ken\",\n    image: '/images/people.png',\n    availability: [0, 1, 2, 3, 4, 5]\n  }, {\n    id: 5,\n    name: \"Tina\",\n    image: '/images/people.png',\n    availability: [0, 1, 2, 3, 4, 5, 6]\n  }];\n  const formatDate = date => {\n    const options = {\n      weekday: 'short',\n      day: 'numeric',\n      month: 'numeric'\n    };\n    return date.toLocaleDateString('en-CA', options);\n  };\n  const getDayStatus = date => {\n    const today = new Date();\n    if (date.toDateString() === today.toDateString()) {\n      return {\n        label: \"Today\",\n        className: \"today-status\"\n      };\n    } else if (date.getDay() === 0 || date.getDay() === 6) {\n      return {\n        label: \"Weekend\",\n        className: \"weekend-status\"\n      };\n    }\n    return {\n      label: \"Weekday\",\n      className: \"weekday-status\"\n    };\n  };\n  useEffect(() => {\n    const generateDates = () => {\n      const currentDate = new Date();\n      const newDates = [];\n      for (let i = 0; i < 7; i++) {\n        const date = new Date(currentDate);\n        date.setDate(currentDate.getDate() + i);\n        newDates.push(date);\n      }\n      setDates(newDates);\n    };\n    generateDates();\n  }, []);\n  useEffect(() => {\n    const fetchAvailableSlots = async () => {\n      if (selectedDate && selectedTechnician) {\n        const token = localStorage.getItem('token');\n        try {\n          const response = await api.get(`/Bookings/technicians/${selectedTechnician.id}/availability`, {\n            params: {\n              date: selectedDate.toISOString().slice(0, 10)\n            },\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          });\n          console.log(response.data); // Kiểm tra dữ liệu từ API\n          if (response.data) {\n            // Kết hợp ngày và thời gian thành đối tượng Date hợp lệ\n            const slots = response.data.map(slot => {\n              const [hours, minutes] = slot.time.split(':');\n              const dateWithTime = new Date(selectedDate);\n              dateWithTime.setHours(parseInt(hours));\n              dateWithTime.setMinutes(parseInt(minutes));\n              dateWithTime.setSeconds(0);\n              dateWithTime.setMilliseconds(0);\n              return dateWithTime;\n            });\n            setTimeSlots(slots);\n          }\n        } catch (error) {\n          console.error('Error fetching available slots:', error);\n        }\n      }\n    };\n    fetchAvailableSlots();\n  }, [selectedDate, selectedTechnician]);\n  const handleViewAllServices = () => {\n    navigate('/all-services', {\n      state: {\n        selectedServices\n      }\n    });\n  };\n  const toggleTechnicianDropdown = () => {\n    setShowTechnician(!showTechnician);\n  };\n  const handleTechnicianSelect = technician => {\n    setSelectedTechnician(technician);\n    setShowTechnician(false);\n  };\n  const toggleDateDropdown = () => {\n    setShowDates(!showDates);\n  };\n  const handleDateSelect = date => {\n    setSelectedDate(date);\n    setShowDates(false);\n    setSelectedTime(null); // Reset the selected time when a new date is picked\n  };\n  const handleTimeSelect = time => {\n    setSelectedTime(new Date(time));\n  };\n  const isTimeSlotAvailable = time => {\n    const now = new Date();\n    return new Date(time) > now; // Kiểm tra nếu thời gian đã qua chưa\n  };\n  const handleConfirmBooking = async () => {\n    const errors = {\n      service: selectedServices.length === 0,\n      technician: !selectedTechnician,\n      date: !selectedDate,\n      time: !selectedTime\n    };\n    setError(errors);\n    if (!errors.service && !errors.technician && !errors.date && !errors.time) {\n      const customerName = localStorage.getItem('username') || 'Anonymous'; // Lấy tên người dùng từ localStorage hoặc mặc định 'Anonymous'\n      const bookingData = {\n        technicianId: selectedTechnician.id,\n        serviceIds: selectedServices.map(service => service.id),\n        // Kiểm tra nếu serviceId không undefined\n        startTime: selectedDate.toISOString().slice(0, 10) + 'T' + selectedTime.toLocaleTimeString([], {\n          hour12: false\n        }).slice(0, 5) + ':00',\n        duration: 20,\n        // Thời gian mặc định hoặc lấy từ dịch vụ\n        customerName: customerName\n      };\n      console.log('Booking Data:', bookingData); // Log dữ liệu trước khi gửi đi\n\n      try {\n        const token = localStorage.getItem('token');\n        if (!token) {\n          alert('Vui lòng đăng nhập để tiếp tục.');\n          navigate('/login');\n          return;\n        }\n        const response = await api.post('/Bookings', bookingData, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            // Gửi token đúng định dạng\n            'Content-Type': 'application/json'\n          }\n        });\n        if (response.status === 200) {\n          console.log('Booking Success:', response.data);\n          navigate('/thank-you', {\n            state: {\n              selectedServices,\n              totalPayment: selectedServices.reduce((total, service) => total + parseFloat(service.price), 0),\n              selectedTechnician,\n              selectedDate,\n              selectedTime\n            }\n          });\n        } else {\n          console.error('Booking Error:', response.data);\n          alert(response.data.message || 'Đã xảy ra lỗi khi đặt lịch.');\n        }\n      } catch (error) {\n        console.error('Error creating booking:', error.response ? error.response.data : error.message);\n        alert('Đã xảy ra lỗi khi đặt lịch.');\n      }\n    } else {\n      alert('Vui lòng hoàn tất tất cả các trường bắt buộc.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"booking-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"booking-header\",\n      children: \"Booking Appointment\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"step-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-title\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-number\",\n          children: \"1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Salon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-content\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(FaMapMarkerAlt, {\n            className: \"mr-2 text-pink-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"292 Stone Rd W Unit 7A, Guelph, ON N1G 3C4, Canada\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `step-container ${error.service ? 'error-border' : ''}`,\n      onClick: handleViewAllServices,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-title\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-number\",\n          children: \"2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Choose Service\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(GiNails, {\n            className: \"mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 25\n          }, this), selectedServices.length === 0 ? /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"View All Services\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Selected \", selectedServices.length, \" Services\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(FaChevronRight, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 13\n    }, this), selectedServices.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"selected-services-list\",\n      children: [selectedServices.map((service, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"selected-service-item\",\n        children: service.name\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 25\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"total-payment\",\n        children: [\"Total Payment: $\", totalPayment.toFixed(2)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `step-container ${error.technician ? 'error-border' : ''}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-title\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-number\",\n          children: \"3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Choose Date, Time & Stylist\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-content technician-dropdown\",\n        onClick: toggleTechnicianDropdown,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(FaUser, {\n            className: \"mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: selectedTechnician ? selectedTechnician.name : \"Nail Technician\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(FaChevronRight, {\n            className: `ml-auto technician-arrow ${showTechnician ? \"rotate-down\" : \"rotate-right\"}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 17\n      }, this), showTechnician && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"technician-carousel\",\n        children: technicians.map((tech, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `technician-option ${(selectedTechnician === null || selectedTechnician === void 0 ? void 0 : selectedTechnician.name) === tech.name ? \"selected\" : \"\"}`,\n          onClick: () => handleTechnicianSelect(tech),\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: tech.image,\n            alt: tech.name,\n            className: \"technician-image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: tech.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 33\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `step-content date-dropdown ${error.date ? 'error-border' : ''}`,\n        onClick: toggleDateDropdown,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(FaCalendarAlt, {\n            className: \"mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: selectedDate ? formatDate(selectedDate) : \"Select a Date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(FaChevronRight, {\n            className: `ml-auto date-arrow ${showDates ? \"rotate-down\" : \"rotate-right\"}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 17\n      }, this), showDates && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"date-list\",\n        children: dates.map((date, index) => {\n          const {\n            label,\n            className\n          } = getDayStatus(date);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `date-item ${(selectedDate === null || selectedDate === void 0 ? void 0 : selectedDate.toDateString()) === date.toDateString() ? \"selected\" : \"\"}`,\n            onClick: () => handleDateSelect(date),\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: formatDate(date)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: className,\n              children: label\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 37\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 33\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 21\n      }, this), selectedDate && selectedTechnician && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"time-selection\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Select a Time\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"time-slots\",\n          children: timeSlots.map((time, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `time-slot ${(selectedTime === null || selectedTime === void 0 ? void 0 : selectedTime.getTime()) === time.getTime() ? \"selected\" : \"\"} ${!isTimeSlotAvailable(time) ? \"unavailable\" : \"\"}`,\n            onClick: () => isTimeSlotAvailable(time) && handleTimeSelect(time),\n            children: time.toLocaleTimeString([], {\n              hour: '2-digit',\n              minute: '2-digit'\n            })\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"confirm-button enabled\",\n      onClick: handleConfirmBooking,\n      children: \"Confirm Booking\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"note-text\",\n      children: \"You can cancel or reschedule without any fee.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 197,\n    columnNumber: 9\n  }, this);\n};\n_s(Services, \"qatoDaLON2v/n+UnF3SiJQN8bzo=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = Services;\nexport default Services;\nvar _c;\n$RefreshReg$(_c, \"Services\");","map":{"version":3,"names":["React","useState","useEffect","api","axios","useLocation","useNavigate","FaMapMarkerAlt","FaCalendarAlt","FaChevronRight","FaUser","GiNails","jsxDEV","_jsxDEV","Services","_s","location","navigate","selectedServices","totalPayment","state","showTechnician","setShowTechnician","selectedTechnician","setSelectedTechnician","selectedDate","setSelectedDate","dates","setDates","showDates","setShowDates","error","setError","service","technician","date","time","timeSlots","setTimeSlots","selectedTime","setSelectedTime","technicians","id","name","image","availability","formatDate","options","weekday","day","month","toLocaleDateString","getDayStatus","today","Date","toDateString","label","className","getDay","generateDates","currentDate","newDates","i","setDate","getDate","push","fetchAvailableSlots","token","localStorage","getItem","response","get","params","toISOString","slice","headers","console","log","data","slots","map","slot","hours","minutes","split","dateWithTime","setHours","parseInt","setMinutes","setSeconds","setMilliseconds","handleViewAllServices","toggleTechnicianDropdown","handleTechnicianSelect","toggleDateDropdown","handleDateSelect","handleTimeSelect","isTimeSlotAvailable","now","handleConfirmBooking","errors","length","customerName","bookingData","technicianId","serviceIds","startTime","toLocaleTimeString","hour12","duration","alert","post","status","reduce","total","parseFloat","price","message","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","index","toFixed","tech","src","alt","getTime","hour","minute","_c","$RefreshReg$"],"sources":["C:/Users/RTD0224/source/repos/nail-salon-web/src/components/Services.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport api from './axiosInstance';\r\nimport axios from 'axios';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { FaMapMarkerAlt, FaCalendarAlt, FaChevronRight, FaUser } from 'react-icons/fa';\r\nimport { GiNails } from 'react-icons/gi';\r\nimport './css/Services.css';\r\n\r\n\r\n\r\nconst Services = () => {\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n    const { selectedServices = [], totalPayment = 0 } = location.state || {};\r\n\r\n    const [showTechnician, setShowTechnician] = useState(false);\r\n    const [selectedTechnician, setSelectedTechnician] = useState(null);\r\n    const [selectedDate, setSelectedDate] = useState(null);\r\n    const [dates, setDates] = useState([]);\r\n    const [showDates, setShowDates] = useState(false);\r\n    const [error, setError] = useState({ service: false, technician: false, date: false, time: false });\r\n    const [timeSlots, setTimeSlots] = useState([]);\r\n    const [selectedTime, setSelectedTime] = useState(null);\r\n\r\n    const technicians = [\r\n        { id: 1, name: \"Wendy\", image: '/images/people.png', availability: [0, 1, 2, 3, 4, 5, 6] },\r\n        { id: 2, name: \"Trung\", image: '/images/people.png', availability: [0, 1, 2, 3, 4, 5] },\r\n        { id: 3, name: \"Kelly\", image: '/images/people.png', availability: [0, 1, 2, 3, 4, 5] },\r\n        { id: 4, name: \"Ken\", image: '/images/people.png', availability: [0, 1, 2, 3, 4, 5] },\r\n        { id: 5, name: \"Tina\", image: '/images/people.png', availability: [0, 1, 2, 3, 4, 5, 6] }\r\n    ];\r\n\r\n    const formatDate = (date) => {\r\n        const options = { weekday: 'short', day: 'numeric', month: 'numeric' };\r\n        return date.toLocaleDateString('en-CA', options);\r\n    };\r\n\r\n    const getDayStatus = (date) => {\r\n        const today = new Date();\r\n        if (date.toDateString() === today.toDateString()) {\r\n            return { label: \"Today\", className: \"today-status\" };\r\n        } else if (date.getDay() === 0 || date.getDay() === 6) {\r\n            return { label: \"Weekend\", className: \"weekend-status\" };\r\n        }\r\n        return { label: \"Weekday\", className: \"weekday-status\" };\r\n    };\r\n\r\n    useEffect(() => {\r\n        const generateDates = () => {\r\n            const currentDate = new Date();\r\n            const newDates = [];\r\n            for (let i = 0; i < 7; i++) {\r\n                const date = new Date(currentDate);\r\n                date.setDate(currentDate.getDate() + i);\r\n                newDates.push(date);\r\n            }\r\n            setDates(newDates);\r\n        };\r\n\r\n        generateDates();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const fetchAvailableSlots = async () => {\r\n            if (selectedDate && selectedTechnician) {\r\n                const token = localStorage.getItem('token');\r\n\r\n                try {\r\n                    const response = await api.get(`/Bookings/technicians/${selectedTechnician.id}/availability`, {\r\n                        params: { date: selectedDate.toISOString().slice(0, 10) },\r\n                        headers: {\r\n                            'Authorization': `Bearer ${token}`\r\n                        }\r\n                    });\r\n                    console.log(response.data); // Kiểm tra dữ liệu từ API\r\n                    if (response.data) {\r\n                        // Kết hợp ngày và thời gian thành đối tượng Date hợp lệ\r\n                        const slots = response.data.map(slot => {\r\n                            const [hours, minutes] = slot.time.split(':');\r\n                            const dateWithTime = new Date(selectedDate);\r\n                            dateWithTime.setHours(parseInt(hours));\r\n                            dateWithTime.setMinutes(parseInt(minutes));\r\n                            dateWithTime.setSeconds(0);\r\n                            dateWithTime.setMilliseconds(0);\r\n                            return dateWithTime;\r\n                        });\r\n                        setTimeSlots(slots);\r\n                    }\r\n                } catch (error) {\r\n                    console.error('Error fetching available slots:', error);\r\n                }\r\n            }\r\n        };\r\n        fetchAvailableSlots();\r\n    }, [selectedDate, selectedTechnician]);\r\n\r\n\r\n    const handleViewAllServices = () => {\r\n        navigate('/all-services', { state: { selectedServices } });\r\n    };\r\n\r\n    const toggleTechnicianDropdown = () => {\r\n        setShowTechnician(!showTechnician);\r\n    };\r\n\r\n    const handleTechnicianSelect = (technician) => {\r\n        setSelectedTechnician(technician);\r\n        setShowTechnician(false);\r\n    };\r\n\r\n    const toggleDateDropdown = () => {\r\n        setShowDates(!showDates);\r\n    };\r\n\r\n    const handleDateSelect = (date) => {\r\n        setSelectedDate(date);\r\n        setShowDates(false);\r\n        setSelectedTime(null); // Reset the selected time when a new date is picked\r\n    };\r\n\r\n    const handleTimeSelect = (time) => {\r\n        setSelectedTime(new Date(time));\r\n    };\r\n\r\n    const isTimeSlotAvailable = (time) => {\r\n        const now = new Date();\r\n        return new Date(time) > now; // Kiểm tra nếu thời gian đã qua chưa\r\n    };\r\n\r\n\r\n    const handleConfirmBooking = async () => {\r\n        const errors = {\r\n            service: selectedServices.length === 0,\r\n            technician: !selectedTechnician,\r\n            date: !selectedDate,\r\n            time: !selectedTime,\r\n        };\r\n\r\n        setError(errors);\r\n\r\n        if (!errors.service && !errors.technician && !errors.date && !errors.time) {\r\n            const customerName = localStorage.getItem('username') || 'Anonymous'; // Lấy tên người dùng từ localStorage hoặc mặc định 'Anonymous'\r\n            const bookingData = {\r\n                technicianId: selectedTechnician.id,\r\n                serviceIds: selectedServices.map(service => service.id), // Kiểm tra nếu serviceId không undefined\r\n                startTime: selectedDate.toISOString().slice(0, 10) + 'T' + selectedTime.toLocaleTimeString([], { hour12: false }).slice(0, 5) + ':00',\r\n                duration: 20, // Thời gian mặc định hoặc lấy từ dịch vụ\r\n                customerName: customerName\r\n            };\r\n\r\n            console.log('Booking Data:', bookingData); // Log dữ liệu trước khi gửi đi\r\n\r\n            try {\r\n                const token = localStorage.getItem('token');\r\n                if (!token) {\r\n                    alert('Vui lòng đăng nhập để tiếp tục.');\r\n                    navigate('/login');\r\n                    return;\r\n                }\r\n\r\n                const response = await api.post('/Bookings', bookingData, {\r\n                    headers: {\r\n                        'Authorization': `Bearer ${token}`, // Gửi token đúng định dạng\r\n                        'Content-Type': 'application/json',\r\n                    },\r\n                });\r\n\r\n                if (response.status === 200) {\r\n                    console.log('Booking Success:', response.data);\r\n                    navigate('/thank-you', {\r\n                        state: {\r\n                            selectedServices,\r\n                            totalPayment: selectedServices.reduce((total, service) => total + parseFloat(service.price), 0),\r\n                            selectedTechnician,\r\n                            selectedDate,\r\n                            selectedTime\r\n                        }\r\n                    });\r\n                } else {\r\n                    console.error('Booking Error:', response.data);\r\n                    alert(response.data.message || 'Đã xảy ra lỗi khi đặt lịch.');\r\n                }\r\n            } catch (error) {\r\n                console.error('Error creating booking:', error.response ? error.response.data : error.message);\r\n                alert('Đã xảy ra lỗi khi đặt lịch.');\r\n            }\r\n\r\n        } else {\r\n            alert('Vui lòng hoàn tất tất cả các trường bắt buộc.');\r\n        }\r\n    };\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"booking-container\">\r\n            <h1 className=\"booking-header\">Booking Appointment</h1>\r\n\r\n            {/* Step 1: Select Salon */}\r\n            <div className=\"step-container\">\r\n                <div className=\"step-title\">\r\n                    <div className=\"step-number\">1</div>\r\n                    <h2>Salon</h2>\r\n                </div>\r\n                <div className=\"step-content\">\r\n                    <div className=\"flex items-center\">\r\n                        <FaMapMarkerAlt className=\"mr-2 text-pink-500\" />\r\n                        <span>292 Stone Rd W Unit 7A, Guelph, ON N1G 3C4, Canada</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Step 2: Choose Service */}\r\n            <div className={`step-container ${error.service ? 'error-border' : ''}`} onClick={handleViewAllServices}>\r\n                <div className=\"step-title\">\r\n                    <div className=\"step-number\">2</div>\r\n                    <h2>Choose Service</h2>\r\n                </div>\r\n                <div className=\"step-content\">\r\n                    <div className=\"flex items-center\">\r\n                        <GiNails className=\"mr-2\" />\r\n                        {selectedServices.length === 0 ? (\r\n                            <span>View All Services</span>\r\n                        ) : (\r\n                            <span>Selected {selectedServices.length} Services</span>\r\n                        )}\r\n                    </div>\r\n                    <FaChevronRight />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Hiển thị các dịch vụ đã chọn */}\r\n            {selectedServices.length > 0 && (\r\n                <div className=\"selected-services-list\">\r\n                    {selectedServices.map((service, index) => (\r\n                        <div key={index} className=\"selected-service-item\">\r\n                            {service.name}\r\n                        </div>\r\n                    ))}\r\n                    <div className=\"total-payment\">\r\n                        Total Payment: ${totalPayment.toFixed(2)}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Step 3: Choose Date, Time & Stylist */}\r\n            <div className={`step-container ${error.technician ? 'error-border' : ''}`}>\r\n                <div className=\"step-title\">\r\n                    <div className=\"step-number\">3</div>\r\n                    <h2>Choose Date, Time & Stylist</h2>\r\n                </div>\r\n\r\n                {/* Technician Selection */}\r\n                <div className=\"step-content technician-dropdown\" onClick={toggleTechnicianDropdown}>\r\n                    <div className=\"flex items-center\">\r\n                        <FaUser className=\"mr-2\" />\r\n                        <span>{selectedTechnician ? selectedTechnician.name : \"Nail Technician\"}</span>\r\n                        <FaChevronRight className={`ml-auto technician-arrow ${showTechnician ? \"rotate-down\" : \"rotate-right\"}`} />\r\n                    </div>\r\n                </div>\r\n                {showTechnician && (\r\n                    <div className=\"technician-carousel\">\r\n                        {technicians.map((tech, index) => (\r\n                            <div\r\n                                key={index}\r\n                                className={`technician-option ${selectedTechnician?.name === tech.name ? \"selected\" : \"\"}`}\r\n                                onClick={() => handleTechnicianSelect(tech)}\r\n                            >\r\n                                <img src={tech.image} alt={tech.name} className=\"technician-image\" />\r\n                                <span>{tech.name}</span>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Date Selection */}\r\n                <div className={`step-content date-dropdown ${error.date ? 'error-border' : ''}`} onClick={toggleDateDropdown}>\r\n                    <div className=\"flex items-center\">\r\n                        <FaCalendarAlt className=\"mr-2\" />\r\n                        <span>{selectedDate ? formatDate(selectedDate) : \"Select a Date\"}</span>\r\n                        <FaChevronRight className={`ml-auto date-arrow ${showDates ? \"rotate-down\" : \"rotate-right\"}`} />\r\n                    </div>\r\n                </div>\r\n                {showDates && (\r\n                    <div className=\"date-list\">\r\n                        {dates.map((date, index) => {\r\n                            const { label, className } = getDayStatus(date);\r\n                            return (\r\n                                <div\r\n                                    key={index}\r\n                                    className={`date-item ${selectedDate?.toDateString() === date.toDateString() ? \"selected\" : \"\"}`}\r\n                                    onClick={() => handleDateSelect(date)}\r\n                                >\r\n                                    <span>{formatDate(date)}</span>\r\n                                    <span className={className}>{label}</span>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Time Selection */}\r\n                {selectedDate && selectedTechnician && (\r\n                    <div className=\"time-selection\">\r\n                        <h3>Select a Time</h3>\r\n                        <div className=\"time-slots\">\r\n                            {timeSlots.map((time, index) => (\r\n                                <div\r\n                                    key={index}\r\n                                    className={`time-slot ${selectedTime?.getTime() === time.getTime() ? \"selected\" : \"\"} ${!isTimeSlotAvailable(time) ? \"unavailable\" : \"\"}`}\r\n                                    onClick={() => isTimeSlotAvailable(time) && handleTimeSelect(time)}\r\n                                >\r\n                                    {time.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Confirm Button */}\r\n            <button className=\"confirm-button enabled\" onClick={handleConfirmBooking}>\r\n                Confirm Booking\r\n            </button>\r\n            <p className=\"note-text\">You can cancel or reschedule without any fee.</p>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Services;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}